<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-modules/core/hypercore" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Hypercore | Pear by Holepunch</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://pear-docs.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://pear-docs.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://pear-docs.example.com/docs/modules/core/hypercore"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Hypercore | Pear by Holepunch"><meta data-rh="true" name="description" content="Hypercore is a secure, distributed append-only log built for sharing large datasets and streams of real-time data. It comes with a secure transport protocol, making it easy to build fast and scalable peer-to-peer applications."><meta data-rh="true" property="og:description" content="Hypercore is a secure, distributed append-only log built for sharing large datasets and streams of real-time data. It comes with a secure transport protocol, making it easy to build fast and scalable peer-to-peer applications."><link data-rh="true" rel="icon" href="/img/pear-vector.svg"><link data-rh="true" rel="canonical" href="https://pear-docs.example.com/docs/modules/core/hypercore"><link data-rh="true" rel="alternate" href="https://pear-docs.example.com/docs/modules/core/hypercore" hreflang="en"><link data-rh="true" rel="alternate" href="https://pear-docs.example.com/docs/modules/core/hypercore" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Hypercore","item":"https://pear-docs.example.com/docs/modules/core/hypercore"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Pear by Holepunch RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Pear by Holepunch Atom Feed"><link rel="stylesheet" href="/assets/css/styles.4a5f180c.css">
<script src="/assets/js/runtime~main.19e749b2.js" defer="defer"></script>
<script src="/assets/js/main.1c21d272.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/pear-vector.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/pear-vector.svg" alt="Pear Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/pear-vector.svg" alt="Pear Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Pear by Holepunch</b></a><a class="navbar__item navbar__link" href="/whats-new">What&#x27;s New</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/pear-intro">Documentation</a><a class="navbar__item navbar__link" href="/common-faqs">FAQs</a><a class="navbar__item navbar__link" href="/blog">Blogs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/holepunchto" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/pear-intro"><span title="Understanding Pear (Updated)" class="linkLabel_WmDU">Understanding Pear (Updated)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/installation"><span title="Getting started with Pear (Updated)" class="linkLabel_WmDU">Getting started with Pear (Updated)</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/pear-runtime/"><span title="Pear Runtime" class="categoryLinkLabel_W154">Pear Runtime</span></a><button aria-label="Expand sidebar category &#x27;Pear Runtime&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/step-by-step/start-a-desktop-project/desk-proj"><span title="Step-by-Step Guide to (Updated)" class="categoryLinkLabel_W154">Step-by-Step Guide to (Updated)</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/bare-runtime/bare-api"><span title="Bare Runtime" class="categoryLinkLabel_W154">Bare Runtime</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/modules/core/autobase"><span title="Building Blocks of Pear" class="categoryLinkLabel_W154">Building Blocks of Pear</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/modules/core/autobase"><span title="Core" class="categoryLinkLabel_W154">Core</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/core/autobase"><span title="Autobase" class="linkLabel_WmDU">Autobase</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/core/hyperbee"><span title="Hyperbee" class="linkLabel_WmDU">Hyperbee</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/modules/core/hypercore"><span title="Hypercore" class="linkLabel_WmDU">Hypercore</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/modules/storage/corestore"><span title="Storage" class="categoryLinkLabel_W154">Storage</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/modules/encryption-and-protocol/compact-encoding"><span title="Encryption and Protocol" class="categoryLinkLabel_W154">Encryption and Protocol</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/modules/networking/hyperdht"><span title="networking" class="categoryLinkLabel_W154">networking</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/how-to/connect-two-peers"><span title="How-to (Updated)" class="categoryLinkLabel_W154">How-to (Updated)</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/tools/drives"><span title="Tools" class="categoryLinkLabel_W154">Tools</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/application/keet"><span title="App" class="categoryLinkLabel_W154">App</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/use-cases/Bare-on-mobile"><span title="Build with Pear" class="categoryLinkLabel_W154">Build with Pear</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Building Blocks of Pear</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Core</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Hypercore</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Hypercore</h1></header>
<p>Hypercore is a secure, distributed append-only log built for sharing large datasets and streams of real-time data. It comes with a secure transport protocol, making it easy to build fast and scalable peer-to-peer applications.</p>
<p>Notable features include:</p>
<ul>
<li class="">Improved fork detection in the replication protocol, to improve resilience.</li>
<li class="">Optional on-disk encryption for blocks (in addition to the existing transport encryption).</li>
<li class="">A write-ahead log in the storage layer to ensure that power loss or unexpected shutdown cannot lead to data corruption.</li>
<li class="">The <a href="#core.session-options" class=""><code>session</code></a> and <a href="#core.snapshot-options" class=""><code>snapshot</code></a> methods for providing multiple views over the same underlying Hypercore, which simplifies resource management.</li>
<li class="">A <a href="#await-core.truncate-newlength-forkid" class=""><code>truncate</code></a> method for intentionally creating a new fork, starting at a given length. We use this method extensively in <a href="https://docs.pears.com/building-blocks/autobase" target="_blank" rel="noopener noreferrer" class=""><code>autobase</code></a>.</li>
</ul>
<blockquote>
<p><a href="https://github.com/holepunchto/hypercore" target="_blank" rel="noopener noreferrer" class="">GitHub (Hypercore)</a></p>
</blockquote>
<ul>
<li class=""><a href="https://docs.pears.com/building-blocks/hypercore" target="_blank" rel="noopener noreferrer" class="">Hypercore</a>
<ul>
<li class=""><a href="#installation" class="">Creating a new instance</a></li>
<li class="">Basic:<!-- -->
<ul>
<li class="">Properties:<!-- -->
<ul>
<li class=""><a href="#core.writable" class="">core.writable</a></li>
<li class=""><a href="#core.readable" class="">core.readable</a></li>
<li class=""><a href="#core.id" class="">core.id</a></li>
<li class=""><a href="#core.key" class="">core.key</a></li>
<li class=""><a href="#core.keypair" class="">core.keyPair</a></li>
<li class=""><a href="#core.discoverykey" class="">core.discoveryKey</a></li>
<li class=""><a href="#core.encryptionkey" class="">core.encryptionKey</a></li>
<li class=""><a href="#core.length" class="">core.length</a></li>
<li class=""><a href="#core.contiguouslength" class="">core.contiguousLength</a></li>
<li class=""><a href="#core.fork" class="">core.fork</a></li>
<li class=""><a href="#core.padding" class="">core.padding</a></li>
</ul>
</li>
<li class="">Methods:<!-- -->
<ul>
<li class=""><a href="#core.append" class="">core.append(block)</a></li>
<li class=""><a href="#core.get" class="">core.get(index, [options])</a></li>
<li class=""><a href="#core.has" class="">core.has(start, [end])</a></li>
<li class=""><a href="#core.update" class="">core.update()</a></li>
<li class=""><a href="#core.seek" class="">core.seek(byteOffset)</a></li>
<li class=""><a href="#core.createreadstream" class="">core.createReadStream([options])</a></li>
<li class=""><a href="#core.createbytestream" class="">core.createByteStream([options])</a></li>
<li class=""><a href="#core.clear" class="">core.clear(start, [end], [options])</a></li>
<li class=""><a href="#core.truncate" class="">core.truncate(newLength, [forkId])</a></li>
<li class=""><a href="#core.purge" class="">core.purge()</a></li>
<li class=""><a href="#core.treehash" class="">core.treeHash([length])</a></li>
<li class=""><a href="#core.download" class="">core.download([range])</a></li>
<li class=""><a href="#core.session" class="">core.session([options])</a></li>
<li class=""><a href="#core.info" class="">core.info([options])</a></li>
<li class=""><a href="#core.close" class="">core.close()</a></li>
<li class=""><a href="#core.ready" class="">core.ready()</a></li>
<li class=""><a href="#core.replicate" class="">core.replicate(isInitiatorOrReplicationStream, [options])</a></li>
<li class=""><a href="#core.findingpeers" class="">core.findingPeers()</a></li>
<li class=""><a href="#core.session" class="">core.session([options])</a></li>
<li class=""><a href="#core.snapshot" class="">core.snapshot([options])</a></li>
</ul>
</li>
<li class="">Events:<!-- -->
<ul>
<li class=""><a href="#core.onappend" class="">append</a></li>
<li class=""><a href="#core.ontruncate" class="">truncate</a></li>
<li class=""><a href="#core.onready" class="">ready</a></li>
<li class=""><a href="#core.onclose" class="">close</a></li>
<li class=""><a href="#core.onpeer-add" class="">peer-add</a></li>
<li class=""><a href="#core.onpeer-remove" class="">peer-remove</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation" translate="no">​</a></h3>
<p>Install with <a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer" class="">npm</a>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install hypercore</span><br></span></code></pre></div></div>
<p>A Hypercore can only be modified by its creator; internally it signs updates with a private key that&#x27;s meant to live on a single machine, and should never be shared. However, the writer can replicate to many readers, in a manner similar to BitTorrent.</p>
<blockquote>
<p>Unlike BitTorrent, a Hypercore can be modified after its initial creation, and peers can receive live update notifications whenever the writer adds new blocks.</p>
</blockquote>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="api">API<a href="#api" class="hash-link" aria-label="Direct link to API" title="Direct link to API" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="const-core--new-hypercorestorage-key-options"><strong><code>const core = new Hypercore(storage, [key], [options])</code></strong><a href="#const-core--new-hypercorestorage-key-options" class="hash-link" aria-label="Direct link to const-core--new-hypercorestorage-key-options" title="Direct link to const-core--new-hypercorestorage-key-options" translate="no">​</a></h4>
<p>Creates a new Hypercore instance.</p>
<p><code>storage</code> should be set to a directory where to store the data and core metadata.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> core </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Hypercore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;./directory&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// store data in ./directory</span><br></span></code></pre></div></div>
<blockquote>
<p>Alternatively, the user can pass a function instead that is called with every filename Hypercore needs to function and return a <a href="https://github.com/random-access-storage/abstract-random-access" target="_blank" rel="noopener noreferrer" class="">abstract-random-access</a> instance that is used to store the data.</p>
</blockquote>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">RAM</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;random-access-memory&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> core </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Hypercore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">filename</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Filename will be one of: data, bitfield, tree, signatures, key, secret_key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// The data file will contain all the data concatenated.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Store all files in ram by returning a random-access-memory instance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">RAM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>By default Hypercore uses <a href="https://github.com/random-access-storage/random-access-file" target="_blank" rel="noopener noreferrer" class="">random-access-file</a>. This is also useful for storing specific files in other directories.</p>
<p>Hypercore will produce the following files:</p>
<ul>
<li class=""><code>oplog</code> - The internal truncating journal/oplog that tracks mutations, the public key, and other metadata.</li>
<li class=""><code>tree</code> - The Merkle Tree file.</li>
<li class=""><code>bitfield</code> - The bitfield marking which data blocks this core has.</li>
<li class=""><code>data</code> - The raw data of each block.</li>
</ul>
<blockquote>
<p><code>tree</code>, <code>data</code>, and <code>bitfield</code> are normally very sparse files.</p>
</blockquote>
<p><code>key</code> can be set to a Hypercore public key. When unset this the public key will be loaded from storage. If no key exists a new key pair will be generated.</p>
<p><code>options</code> include:</p>
<table><thead><tr><th style="text-align:center">Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td style="text-align:center"><strong><code>createIfMissing</code></strong></td><td>create a new Hypercore key pair if none was present in the storage</td><td>Boolean</td><td><code>true</code></td></tr><tr><td style="text-align:center"><strong><code>overwrite</code></strong></td><td>overwrite any old Hypercore that might already exist</td><td>Boolean</td><td><code>false</code></td></tr><tr><td style="text-align:center"><strong><code>sparse</code></strong></td><td>enable sparse mode, counting unavailable blocks towards core.length and core.byteLength</td><td>Boolean</td><td><code>true</code></td></tr><tr><td style="text-align:center"><strong><code>valueEncoding</code></strong></td><td>one of &#x27;json&#x27;, &#x27;utf-8&#x27;, or &#x27;binary&#x27;</td><td>String</td><td><code>&#x27;binary&#x27;</code></td></tr><tr><td style="text-align:center"><strong><code>encodeBatch</code></strong></td><td>optionally apply an encoding to complete batches</td><td>Function</td><td><code>batch =&gt; { ... }</code></td></tr><tr><td style="text-align:center"><strong><code>keyPair</code></strong></td><td>optionally pass the public key and secret key as a key pair</td><td>Object</td><td><code>null</code></td></tr><tr><td style="text-align:center"><strong><code>encryptionKey</code></strong></td><td>optionally pass an encryption key to enable block encryption</td><td>Buffer</td><td><code>null</code></td></tr><tr><td style="text-align:center"><strong><code>onwait</code></strong></td><td>hook that is called if gets are waiting for download</td><td>Function</td><td><code>() =&gt; {}</code></td></tr><tr><td style="text-align:center"><strong><code>timeout</code></strong></td><td>constructor timeout</td><td>integer</td><td><code>0</code></td></tr><tr><td style="text-align:center"><strong><code>writable</code></strong></td><td>disable appends and truncates</td><td>Boolean</td><td><code>true</code></td></tr></tbody></table>
<p>We can also set valueEncoding to any <a href="https://github.com/mafintosh/abstract-encoding" target="_blank" rel="noopener noreferrer" class="">abstract-encoding</a> or <a href="https://github.com/compact-encoding" target="_blank" rel="noopener noreferrer" class="">compact-encoding</a> instance.</p>
<p>valueEncodings will be applied to individual blocks, even if we append batches. To control encoding at the batch level, the <code>encodeBatch</code> option can be used, which is a function that takes a batch and returns a binary-encoded batch. If a custom valueEncoding is provided, it will not be applied prior to <code>encodeBatch</code>.</p>
<blockquote>
<p><strong>Do not</strong> attempt to create multiple Hypercores with the same private key (i.e., on two different devices).</p>
<p>Doing so will <strong>most definitely</strong> cause a Hypercore conflict. A conflict implies that the core was implicitly forked. In such a scenario, replicating peers will &#x27;gossip&#x27; that the core should be deemed dead and unrecoverable.</p>
</blockquote>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="properties">Properties<a href="#properties" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties" translate="no">​</a></h4>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="corereadable-"><strong><code>core.readable</code></strong> <a href="#core.readable" id="core.readable"></a><a href="#corereadable-" class="hash-link" aria-label="Direct link to corereadable-" title="Direct link to corereadable-" translate="no">​</a></h4>
<p>Can we read from this core? After <a href="#await-coreclose" class="">closing</a> the core this will be <code>false</code>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="coreid-"><strong><code>core.id</code></strong> <a href="#core.id" id="core.id"></a><a href="#coreid-" class="hash-link" aria-label="Direct link to coreid-" title="Direct link to coreid-" translate="no">​</a></h4>
<p>A string containing the ID (z-base-32 of the public key) that identifies this core.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="corekey-"><strong><code>core.key</code></strong> <a href="#core.key" id="core.key"></a><a href="#corekey-" class="hash-link" aria-label="Direct link to corekey-" title="Direct link to corekey-" translate="no">​</a></h4>
<p>Buffer containing the public key identifying this core.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Learn more about Hypercore Keys</summary><div><div class="collapsibleContent_i85q"><p>All Hypercores are identified by two properties: A <strong>public key</strong> and a <strong>discovery key</strong>, the latter of which is derived from the public key. Importantly, the public key gives peers read **** capability — if we have the key, we can exchange blocks with other peers.</p><p>The process of block replication requires the peers to prove to each other that they know the public key. This is important because the public key is necessary for peers to be able to validate the blocks. Hence, only the peers who know the public key can perform the block replication.</p><p>Since the public key is also a read capability, it can&#x27;t be used to discover other readers (by advertising it on a DHT, for example) as that would lead to capability leaks. The discovery key, being derived from the public key but lacking read capability, can be shared openly for peer discovery.</p></div></div></details>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="corekeypair-"><strong><code>core.keyPair</code></strong> <a href="#core.keypair" id="core.keypair"></a><a href="#corekeypair-" class="hash-link" aria-label="Direct link to corekeypair-" title="Direct link to corekeypair-" translate="no">​</a></h4>
<p>An object containing buffers of the core&#x27;s public and secret key</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="corediscoverykey-"><strong><code>core.discoveryKey</code></strong> <a href="#core.discoverykey" id="core.discoverykey"></a><a href="#corediscoverykey-" class="hash-link" aria-label="Direct link to corediscoverykey-" title="Direct link to corediscoverykey-" translate="no">​</a></h4>
<p>Buffer containing a key derived from the core&#x27;s public key. In contrast to <code>core.key,</code> this key can not be used to verify the data. It can be used to announce or look for peers that are sharing the same core, without leaking the core key.</p>
<blockquote>
<p>The above properties are populated after <a href="#await-core.ready" class=""><code>ready</code></a> has been emitted. Will be <code>null</code> before the event.</p>
</blockquote>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="coreencryptionkey-"><strong><code>core.encryptionKey</code></strong> <a href="#core.encryptionkey" id="core.encryptionkey"></a><a href="#coreencryptionkey-" class="hash-link" aria-label="Direct link to coreencryptionkey-" title="Direct link to coreencryptionkey-" translate="no">​</a></h4>
<p>Buffer containing the optional block encryption key of this core. Will be <code>null</code> unless block encryption is enabled.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="corewritable-"><strong><code>core.writable</code></strong> <a href="#core.writable" id="core.writable"></a><a href="#corewritable-" class="hash-link" aria-label="Direct link to corewritable-" title="Direct link to corewritable-" translate="no">​</a></h4>
<p>Can we append to this core?</p>
<blockquote>
<p>Populated after <a href="#await-core.ready" class=""><code>ready</code></a> has been emitted. Will be <code>false</code> before the event.</p>
</blockquote>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="corelength-"><strong><code>core.length</code></strong> <a href="#core.length" id="core.length"></a><a href="#corelength-" class="hash-link" aria-label="Direct link to corelength-" title="Direct link to corelength-" translate="no">​</a></h4>
<p>The number of blocks of data available on this core. If <code>sparse: false</code>, this will equal <code>core.contiguousLength</code>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="corecontiguouslength-"><strong><code>core.contiguousLength</code></strong> <a href="#core.contiguouslength" id="core.contiguouslength"></a><a href="#corecontiguouslength-" class="hash-link" aria-label="Direct link to corecontiguouslength-" title="Direct link to corecontiguouslength-" translate="no">​</a></h4>
<p>The number of blocks contiguously available starting from the first block of this core.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="corefork-"><strong><code>core.fork</code></strong> <a href="#core.fork" id="core.fork"></a><a href="#corefork-" class="hash-link" aria-label="Direct link to corefork-" title="Direct link to corefork-" translate="no">​</a></h4>
<p>The current fork id of this core</p>
<blockquote>
<p>The above properties are populated after <a href="#await-core.ready" class=""><code>ready</code></a> has been emitted. Will be <code>0</code> before the event.</p>
</blockquote>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="corepadding-"><strong><code>core.padding</code></strong> <a href="#core.padding" id="core.padding"></a><a href="#corepadding-" class="hash-link" aria-label="Direct link to corepadding-" title="Direct link to corepadding-" translate="no">​</a></h4>
<p>The amount of padding applied to each block of this core. Will be <code>0</code> unless block encryption is enabled.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="methods">Methods<a href="#methods" class="hash-link" aria-label="Direct link to Methods" title="Direct link to Methods" translate="no">​</a></h4>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="const--length-bytelength---await-coreappendblock-"><strong><code>const { length, byteLength } = await core.append(block)</code></strong> <a href="#core.append" id="core.append"></a><a href="#const--length-bytelength---await-coreappendblock-" class="hash-link" aria-label="Direct link to const--length-bytelength---await-coreappendblock-" title="Direct link to const--length-bytelength---await-coreappendblock-" translate="no">​</a></h4>
<p>Append a block of data (or an array of blocks) to the core. Returns the new length and byte length of the core.</p>
<blockquote>
<p>This operation is &#x27;atomic&#x27;. This means that the block is appended altogether or not at all (in case of I/O failure).</p>
</blockquote>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// simple call append with a new block of data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;I am a block of data&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// pass an array to append multiple blocks as a batch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;batch block 1&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;batch block 2&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="const-block--await-coregetindex-options-"><strong><code>const block = await core.get(index, [options])</code></strong> <a href="#core.get" id="core.get"></a><a href="#const-block--await-coregetindex-options-" class="hash-link" aria-label="Direct link to const-block--await-coregetindex-options-" title="Direct link to const-block--await-coregetindex-options-" translate="no">​</a></h4>
<p>Get a block of data. If the data is not available locally this method will prioritize and wait for the data to be downloaded.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// get block #42</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> block </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// get block #43, but only wait 5s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> blockIfFast </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">43</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// get block #44, but only if we have it locally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> blockLocal </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">44</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">wait</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><code>options</code> include:</p>
<table><thead><tr><th style="text-align:center">Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td style="text-align:center"><strong><code>wait</code></strong></td><td>Wait for the block to be downloaded</td><td>Boolean</td><td><code>true</code></td></tr><tr><td style="text-align:center"><strong><code>onwait</code></strong></td><td>Hook that is called if the get is waiting for download</td><td>Boolean</td><td><code>() =&gt; {}</code></td></tr><tr><td style="text-align:center"><strong><code>timeout</code></strong></td><td>Wait at max some milliseconds (0 means no timeout)</td><td>Boolean</td><td><code>0</code></td></tr><tr><td style="text-align:center"><strong><code>valueEncoding</code></strong></td><td>One of &#x27;json&#x27;, &#x27;utf-8&#x27;, or &#x27;binary&#x27;</td><td>String</td><td>core&#x27;s valueEncoding</td></tr><tr><td style="text-align:center"><strong><code>decrypt</code></strong></td><td>Automatically decrypts the block if encrypted</td><td>Boolean</td><td><code>true</code></td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="const-has--await-corehasstart-end-"><strong><code>const has = await core.has(start, [end])</code></strong> <a href="#core.has" id="core.has"></a><a href="#const-has--await-corehasstart-end-" class="hash-link" aria-label="Direct link to const-has--await-corehasstart-end-" title="Direct link to const-has--await-corehasstart-end-" translate="no">​</a></h4>
<p>Check if the core has all blocks between <code>start</code> and <code>end</code>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="const-updated--await-coreupdateoptions-"><strong><code>const updated = await core.update([options])</code></strong> <a href="#core.update" id="core.update"></a><a href="#const-updated--await-coreupdateoptions-" class="hash-link" aria-label="Direct link to const-updated--await-coreupdateoptions-" title="Direct link to const-updated--await-coreupdateoptions-" translate="no">​</a></h4>
<p>Wait for the core to try and find a signed update to its length. Does not download any data from peers except for proof of the new core length.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> updated </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;core was updated?&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> updated</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;length is&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><code>options</code> include:</p>
<table><thead><tr><th style="text-align:center">Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td style="text-align:center"><strong><code>wait</code></strong></td><td>Wait for the meta-data of hypercore to be updated</td><td>Boolean</td><td><code>replicator.findingPeers &gt; 0</code></td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="const-index-relativeoffset--await-coreseekbyteoffset-options-"><strong><code>const [index, relativeOffset] = await core.seek(byteOffset, [options])</code></strong> <a href="#core.seek" id="core.seek"></a><a href="#const-index-relativeoffset--await-coreseekbyteoffset-options-" class="hash-link" aria-label="Direct link to const-index-relativeoffset--await-coreseekbyteoffset-options-" title="Direct link to const-index-relativeoffset--await-coreseekbyteoffset-options-" translate="no">​</a></h4>
<p>Seek a byte offset.</p>
<p>Returns <code>[index, relativeOffset]</code>, where <code>index</code> is the data block the byteOffset is contained in and <code>relativeOffset</code> is the relative byte offset in the data block.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;abc&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;d&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;efg&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> first </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">seek</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// returns [0, 1]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> second </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">seek</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// returns [1, 0]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> third </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">seek</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// returns [2, 1]</span><br></span></code></pre></div></div>
<p><code>options</code> include:</p>
<table><thead><tr><th>Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td><strong><code>wait</code></strong></td><td>wait for data to be downloaded</td><td>Boolean</td><td><code>true</code></td></tr><tr><td><strong><code>timeout</code></strong></td><td>wait for given milliseconds</td><td>Integer</td><td><code>core.timeout</code></td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="const-stream--corecreatereadstreamoptions-"><strong><code>const stream = core.createReadStream([options])</code></strong> <a href="#core.readstream" id="core.readstream"></a><a href="#const-stream--corecreatereadstreamoptions-" class="hash-link" aria-label="Direct link to const-stream--corecreatereadstreamoptions-" title="Direct link to const-stream--corecreatereadstreamoptions-" translate="no">​</a></h4>
<p>Make a read stream to read a range of data out at once.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// read the full core</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fullStream </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createReadStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// read from block 10-15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> partialStream </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createReadStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">start</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">end</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// pipe the stream somewhere using the .pipe method</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// or consume it as an async iterator</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> data </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> fullStream</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;data:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><code>options</code> include:</p>
<table><thead><tr><th>Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td><strong><code>start</code></strong></td><td>Starting offset to read a range of data</td><td>Integer</td><td><code>0</code></td></tr><tr><td><strong><code>end</code></strong></td><td>Ending offset to read a range of data</td><td>Integer</td><td><code>core.length</code></td></tr><tr><td><strong><code>live</code></strong></td><td>Allow realtime data replication</td><td>Boolean</td><td><code>false</code></td></tr><tr><td><strong><code>snapshot</code></strong></td><td>Auto set end to core.length on open or update it on every read</td><td>Boolean</td><td><code>true</code></td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="const-bs--corecreatebytestreamoptions-"><code>const bs = core.createByteStream([options])</code> <a href="#core.createbytestream" id="core.createbytestream"></a><a href="#const-bs--corecreatebytestreamoptions-" class="hash-link" aria-label="Direct link to const-bs--corecreatebytestreamoptions-" title="Direct link to const-bs--corecreatebytestreamoptions-" translate="no">​</a></h4>
<p>Make a byte stream to read a range of bytes.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Read the full core</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fullStream </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createByteStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Read from byte 3, and from there read 50 bytes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> partialStream </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createByteStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">byteOffset</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">byteLength</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Consume it as an async iterator</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> data </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> fullStream</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;data:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Or pipe it somewhere like any stream:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">partialStream</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">stdout</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><code>options</code> include:</p>
<table><thead><tr><th>Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td><strong><code>byteOffset</code></strong></td><td>Starting offset to read a range of bytes</td><td>Integer</td><td><code>0</code></td></tr><tr><td><strong><code>byteLength</code></strong></td><td>Number of bytes that will be read</td><td>Integer</td><td><code>core.byteLength - options.byteOffset</code></td></tr><tr><td><strong><code>prefetch</code></strong></td><td>Controls the number of blocks to preload</td><td>Integer</td><td><code>32</code></td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="const-cleared--await-coreclearstart-end-options-"><strong><code>const cleared = await core.clear(start, [end], [options])</code></strong> <a href="#core.clear" id="core.clear"></a><a href="#const-cleared--await-coreclearstart-end-options-" class="hash-link" aria-label="Direct link to const-cleared--await-coreclearstart-end-options-" title="Direct link to const-cleared--await-coreclearstart-end-options-" translate="no">​</a></h4>
<p>Clears stored blocks between <code>start</code> and <code>end</code>, reclaiming storage when possible.</p>
<p><code>options</code> include:</p>
<table><thead><tr><th>Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td><strong><code>diff</code></strong></td><td>Returned <code>cleared</code> bytes object is null unless enabled</td><td>Boolean</td><td><code>false</code></td></tr></tbody></table>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">clear</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// clear block 4 from local cache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">clear</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// clear block 0-10 from local cache</span><br></span></code></pre></div></div>
<p>The core will also &#x27;gossip&#x27; with peers it is connected to, that no longer have these blocks.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="await-coretruncatenewlength-forkid-"><strong><code>await core.truncate(newLength, [forkId])</code></strong> <a href="#core.truncate" id="core.truncate"></a><a href="#await-coretruncatenewlength-forkid-" class="hash-link" aria-label="Direct link to await-coretruncatenewlength-forkid-" title="Direct link to await-coretruncatenewlength-forkid-" translate="no">​</a></h4>
<p>Truncates the core to a smaller length.</p>
<p>Per default, this will update the fork ID of the core to <code>+ 1</code>, but we can set the preferred fork ID with the option. Note that the fork ID should be incremented in a monotone manner.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="await-corepurge-"><code>await core.purge()</code> <a href="#core.purge" id="core.purge"></a><a href="#await-corepurge-" class="hash-link" aria-label="Direct link to await-corepurge-" title="Direct link to await-corepurge-" translate="no">​</a></h4>
<p>Purge the Hypercore from storage, completely removing all data.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="const-hash--await-coretreehashlength-"><strong><code>const hash = await core.treeHash([length])</code></strong> <a href="#core.purge" id="core.purge"></a><a href="#const-hash--await-coretreehashlength-" class="hash-link" aria-label="Direct link to const-hash--await-coretreehashlength-" title="Direct link to const-hash--await-coretreehashlength-" translate="no">​</a></h4>
<p>Get the Merkle Tree hash of the core at a given length, defaulting to the current length of the core.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="const-range--coredownloadrange-"><strong><code>const range = core.download([range])</code></strong> <a href="#core.download" id="core.download"></a><a href="#const-range--coredownloadrange-" class="hash-link" aria-label="Direct link to const-range--coredownloadrange-" title="Direct link to const-range--coredownloadrange-" translate="no">​</a></h4>
<p>Download a range of data.</p>
<p>We can await until the range has been fully downloaded by doing:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> range</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>A range can have the following properties:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">start</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> startIndex</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">end</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> nonInclusiveEndIndex</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">blocks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">index1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> index2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">linear</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// download range linearly and not randomly</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>To download the full core continuously (often referred to as non-sparse mode):</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Note that this will never be considered downloaded as the range</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// will keep waiting for new blocks to be appended.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">download</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">start</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">end</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>To download a discrete range of blocks, pass a list of indices:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">download</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">blocks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>To cancel downloading a range, simply destroy the range instance:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// will stop downloading now</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">range</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">destroy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="const-session--await-coresessionoptions-"><strong><code>const session = await core.session([options])</code></strong> <a href="#core.session" id="core.session"></a><a href="#const-session--await-coresessionoptions-" class="hash-link" aria-label="Direct link to const-session--await-coresessionoptions-" title="Direct link to const-session--await-coresessionoptions-" translate="no">​</a></h4>
<p>Creates a new Hypercore instance that shares the same underlying core. Options are inherited from the parent instance, unless they are re-set.</p>
<p><code>options</code> are the same as in the constructor.</p>
<blockquote>
<p>Be sure to close any sessions made.</p>
</blockquote>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="const-info--await-coreinfooptions-"><strong><code>const info = await core.info([options])</code></strong> <a href="#core.info" id="core.info"></a><a href="#const-info--await-coreinfooptions-" class="hash-link" aria-label="Direct link to const-info--await-coreinfooptions-" title="Direct link to const-info--await-coreinfooptions-" translate="no">​</a></h4>
<p>Get information about this core, such as its total size in bytes.</p>
<p>The object will look like this:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token maybe-class-name">Info</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">key</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Buffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">discoveryKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Buffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">length</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">contiguousLength</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">byteLength</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">742</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">fork</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">padding</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">storage</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">oplog</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8192</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">tree</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4096</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">blocks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4096</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">bitfield</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4096</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><code>options</code> include:</p>
<table><thead><tr><th>Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td><code>storage</code></td><td>get storage estimates in bytes</td><td>Boolean</td><td><code>false</code></td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="await-coreclose-"><strong><code>await core.close()</code></strong> <a href="#core.close" id="core.close"></a><a href="#await-coreclose-" class="hash-link" aria-label="Direct link to await-coreclose-" title="Direct link to await-coreclose-" translate="no">​</a></h4>
<p>Close this core and release any underlying resources.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="await-coreready-"><strong><code>await core.ready()</code></strong> <a href="#core.ready" id="core.ready"></a><a href="#await-coreready-" class="hash-link" aria-label="Direct link to await-coreready-" title="Direct link to await-coreready-" translate="no">​</a></h4>
<p>Waits for the core to open.</p>
<p>After this has been called <code>core.length</code> and other properties have been set.</p>
<blockquote>
<p>ℹ️ In general, waiting for <code>ready</code> is unnecessary unless there&#x27;s a need to check a synchronous property (like <code>key</code> or <code>discoverykey</code>) before any other async API method has been called. All async methods on the public API, await <code>ready</code> internally.</p>
</blockquote>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="const-stream--corereplicateisinitiatorstream-options-"><strong><code>const stream = core.replicate(isInitiator|stream, options)</code></strong> <a href="#core.replicate" id="core.replicate"></a><a href="#const-stream--corereplicateisinitiatorstream-options-" class="hash-link" aria-label="Direct link to const-stream--corereplicateisinitiatorstream-options-" title="Direct link to const-stream--corereplicateisinitiatorstream-options-" translate="no">​</a></h4>
<p>Creates a replication stream. We should pipe this to another Hypercore instance.</p>
<p>The <code>isInitiator</code> argument is a boolean indicating whether a peer is the initiator of the connection (ie the client) or the passive peer waiting for connections (i.e., the server).</p>
<blockquote>
<p>If a P2P swarm like Hyperswarm is being used, whether a peer is an initiator can be determined by checking if the swarm connection is a client socket or a server socket. In Hyperswarm, a user can check that using the <a href="https://github.com/holepunchto/hyperswarm#swarmonconnection-socket-details" target="_blank" rel="noopener noreferrer" class="">client property on the peer details object</a>.</p>
</blockquote>
<p>To multiplex the replication over an existing Hypercore replication stream, another stream instance can be passed instead of the <code>isInitiator</code> Boolean.</p>
<p>To replicate a Hypercore using <a href="https://docs.pears.com/building-blocks/hyperswarm" target="_blank" rel="noopener noreferrer" class=""><code>Hyperswarm</code></a>:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// assuming swarm is a Hyperswarm instance and core is a Hypercore</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">swarm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;connection&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token parameter">conn</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replicate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">conn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<blockquote>
<p>To replicate many Hypercores over a single Hyperswarm connection, see <a href="https://docs.pears.com/helpers/corestore" target="_blank" rel="noopener noreferrer" class=""><code>Corestore</code></a>.</p>
</blockquote>
<p>If not using <a href="https://docs.pears.com/building-blocks/hyperswarm" target="_blank" rel="noopener noreferrer" class=""><code>Hyperswarm</code></a> or <a href="https://docs.pears.com/helpers/corestore" target="_blank" rel="noopener noreferrer" class=""><code>Corestore</code></a>, specify the <code>isInitiator</code> field, which will create a fresh protocol stream that can be piped over any transport:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// assuming we have two cores, localCore + remoteCore, sharing the same key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// on a server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> net </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;net&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> net</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">socket</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">remoteCore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replicate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// on a client</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> socket </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> net</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">localCore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replicate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<blockquote>
<p>In almost all cases, the use of both Hyperswarm and Corestore Replication is advised and will meet all needs.</p>
</blockquote>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="const-done--corefindingpeers-"><strong><code>const done = core.findingPeers()</code></strong> <a href="#core.findingpeers" id="core.findingpeers"></a><a href="#const-done--corefindingpeers-" class="hash-link" aria-label="Direct link to const-done--corefindingpeers-" title="Direct link to const-done--corefindingpeers-" translate="no">​</a></h4>
<p>Create a hook that tells Hypercore users are finding peers for this core in the background. Call <code>done</code> when user current discovery iteration is done. If using Hyperswarm, call this after a <code>swarm.flush()</code> finishes.</p>
<p>This allows <code>core.update</code> to wait for either the <code>findingPeers</code> hook to finish or one peer to appear before deciding whether it should wait for a Merkle tree update before returning.</p>
<p>In order to prevent <code>get</code> and <code>update</code> from resolving until Hyperswarm (or any other external peer discovery process) has finished, use the following pattern:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// assuming swarm is a Hyperswarm and core is a Hypercore</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> done </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">findingPeers</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">swarm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">discoveryKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// swarm.flush() can be a very expensive operation, so don&#x27;t await it</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// this just marks the &#x27;worst case&#x27;, i.e., when no additional peers will be found</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">swarm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">flush</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// if this block is not available locally, the `get` will wait until</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// *either* a peer connects *or* the swarm flush finishes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="coresessionoptions"><strong><code>core.session([options])</code></strong><a href="#coresessionoptions" class="hash-link" aria-label="Direct link to coresessionoptions" title="Direct link to coresessionoptions" translate="no">​</a></h4>
<p>Returns a new session for the Hypercore.</p>
<p>Used for the resource management of the Hypercores using reference counting. The sessions are individual openings to a Hypercore instance and consequently, the changes made through one session will be reflected across all sessions of the Hypercore.</p>
<blockquote>
<p>The returned value of <code>core.session()</code> can be used as a Hypercore instance i.e., everything provided by the Hypercore API can be used with it.</p>
</blockquote>
<p><code>options</code> include:</p>
<table><thead><tr><th style="text-align:center">Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td style="text-align:center"><strong><code>wait</code></strong></td><td>Wait for the block to be downloaded</td><td>Boolean</td><td><code>true</code></td></tr><tr><td style="text-align:center"><strong><code>onwait</code></strong></td><td>Hook that is called if the get is waiting for download</td><td>Boolean</td><td><code>() =&gt; {}</code></td></tr><tr><td style="text-align:center"><strong><code>sparse</code></strong></td><td>Enables sparse mode, counting unavailable blocks towards <code>core.length</code> and <code>core.byteLength</code></td><td>Boolean</td><td><code>true</code></td></tr><tr><td style="text-align:center"><strong><code>class</code></strong></td><td>class name</td><td>Class</td><td><code>Hypercore</code></td></tr></tbody></table>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> core </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Hypercore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ram</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> session1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">session</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// will not close the underlying Hypercore</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> session1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// will close the Hypercore</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="coresnapshotoptions-"><strong><code>core.snapshot([options])</code></strong> <a href="#core.snapshot" id="core.snapshot"></a><a href="#coresnapshotoptions-" class="hash-link" aria-label="Direct link to coresnapshotoptions-" title="Direct link to coresnapshotoptions-" translate="no">​</a></h4>
<p>Returns a snapshot of the core at that particular time. This is useful for ensuring that multiple <code>get</code> operations are acting on a consistent view of the Hypercore (i.e. if the core forks in between two reads, the second should throw an error).</p>
<p>If <a href="#const-updated--await-coreupdateoptions" class=""><code>core.update()</code></a> is explicitly called on the snapshot instance, it will no longer be locked to the previous data. Rather, it will get updated with the current state of the Hypercore instance.</p>
<p><code>options</code> are the same as the options to <a href="#coresessionoptions" class=""><code>core.session()</code></a>.</p>
<blockquote>
<p>The fixed-in-time Hypercore clone created via snapshotting does not receive updates from the main Hypercore, unlike the Hypercore instance returned by <code>core.session()</code>.</p>
</blockquote>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="events">Events<a href="#events" class="hash-link" aria-label="Direct link to Events" title="Direct link to Events" translate="no">​</a></h4>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="coreonappend-"><strong><code>core.on(&#x27;append&#x27;)</code></strong> <a href="#core.onappend" id="core.onappend"></a><a href="#coreonappend-" class="hash-link" aria-label="Direct link to coreonappend-" title="Direct link to coreonappend-" translate="no">​</a></h4>
<p>Emitted when the core has been appended to (i.e., has a new length/byte length), either locally or remotely.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="coreontruncate-ancestors-forkid-"><strong><code>core.on(&#x27;truncate&#x27;, ancestors, forkId)</code></strong> <a href="#core.ontruncate" id="core.ontruncate"></a><a href="#coreontruncate-ancestors-forkid-" class="hash-link" aria-label="Direct link to coreontruncate-ancestors-forkid-" title="Direct link to coreontruncate-ancestors-forkid-" translate="no">​</a></h4>
<p>Emitted when the core has been truncated, either locally or remotely.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="coreonready-"><strong><code>core.on(&#x27;ready&#x27;)</code></strong> <a href="#core.onready" id="core.onready"></a><a href="#coreonready-" class="hash-link" aria-label="Direct link to coreonready-" title="Direct link to coreonready-" translate="no">​</a></h4>
<p>Emitted after the core has initially opened all its internal state.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="coreonclose-"><strong><code>core.on(&#x27;close&#x27;)</code></strong> <a href="#core.onclose" id="core.onclose"></a><a href="#coreonclose-" class="hash-link" aria-label="Direct link to coreonclose-" title="Direct link to coreonclose-" translate="no">​</a></h4>
<p>Emitted when the core has been fully closed.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="coreonpeer-add-"><strong><code>core.on(&#x27;peer-add&#x27;)</code></strong> <a href="#core.onpeer-add" id="core.onpeer-add"></a><a href="#coreonpeer-add-" class="hash-link" aria-label="Direct link to coreonpeer-add-" title="Direct link to coreonpeer-add-" translate="no">​</a></h4>
<p>Emitted when a new connection has been established with a peer.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="coreonpeer-remove-"><strong><code>core.on(&#x27;peer-remove&#x27;)</code></strong> <a href="#core.onpeer-remove" id="core.onpeer-remove"></a><a href="#coreonpeer-remove-" class="hash-link" aria-label="Direct link to coreonpeer-remove-" title="Direct link to coreonpeer-remove-" translate="no">​</a></h4>
<p>Emitted when a peer&#x27;s connection has been closed.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/modules/core/hyperbee"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Hyperbee</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/modules/storage/corestore"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">corestore</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#api" class="table-of-contents__link toc-highlight">API</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started-with-pear/install">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/pear-runtime/api">Pear Runtime</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/whats-new">What&#x27;s New</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/holepunchto" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Holepunch. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>